<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fxmanager.optimization package &mdash; FX-Manager 1.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="fxmanager.simulation package" href="fxmanager.simulation.html" />
    <link rel="prev" title="fxmanager.dwx package" href="fxmanager.dwx.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> FX-Manager
          </a>
              <div class="version">
                1.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">fxmanager</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="fxmanager.html">fxmanager package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="fxmanager.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="fxmanager.basic.html">fxmanager.basic package</a></li>
<li class="toctree-l4"><a class="reference internal" href="fxmanager.dwx.html">fxmanager.dwx package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">fxmanager.optimization package</a></li>
<li class="toctree-l4"><a class="reference internal" href="fxmanager.simulation.html">fxmanager.simulation package</a></li>
<li class="toctree-l4"><a class="reference internal" href="fxmanager.strategies.html">fxmanager.strategies package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fxmanager.html#module-fxmanager">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FX-Manager</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">fxmanager</a> &raquo;</li>
          <li><a href="fxmanager.html">fxmanager package</a> &raquo;</li>
      <li>fxmanager.optimization package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/fxmanager.optimization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="fxmanager-optimization-package">
<h1>fxmanager.optimization package<a class="headerlink" href="#fxmanager-optimization-package" title="Permalink to this headline"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</div>
<div class="section" id="module-fxmanager.optimization.eq_weight_optimizer">
<span id="fxmanager-optimization-eq-weight-optimizer-module"></span><h2>fxmanager.optimization.eq_weight_optimizer module<a class="headerlink" href="#module-fxmanager.optimization.eq_weight_optimizer" title="Permalink to this headline"></a></h2>
<p>This module contains helper functions used internally in this module and other modules in fxmanager’s optimization sub-package.</p>
<p>the functions defined in this module are designed for constructing optimal equally weighted portfolios. a portfolio consists of one or more assets where an asset in this context refers to a currency pair being traded in a specefic time frame.  
for example, if the currency pair ‘EURUSD’ is being traded in two different time frames, 5 and 10 minutes, where a new position is opened every 5 or 10 minutes, in this case the ‘EURUSD_5min’ and ‘EURUSD_10min’ are two different assets.</p>
<dl class="simple">
<dt>Public Functions:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>optimize(): runs equally weighted portfolio optimization using data from a single day given an optimization method and objective.</dt><dd><p>** this function is designed to be used internally in ‘fxmanager.optimization.eqw_optimization_test.run()’ function. However, it can be used by the user separately to construct a portfolio for a given day without running the optimization test.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.eq_weight_optimizer.mixed_timframes_portfolio">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.eq_weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">mixed_timframes_portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bestN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrstN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.eq_weight_optimizer.mixed_timframes_portfolio" title="Permalink to this definition"></a></dt>
<dd><p>Helper function for ‘fxmanager.optimization.eq_weight_optimizer.optimize()’ function.</p>
<p>selects the optimal currency pair from each timeframe in the given data, then selects the optimal equally weighted combination of these timeframes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.eq_weight_optimizer.optimize">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.eq_weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best_rets_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrst_rets_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mixed_timeframes'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.eq_weight_optimizer.optimize" title="Permalink to this definition"></a></dt>
<dd><p>runs equally weighted portfolio optimization using data from a single day given an optimization method and objective.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>best_rets_df: pandas dataframe of average best return for each asset, columns are time_frames and index is a range index.</p></li>
<li><p>wrst_rets_df: pandas dataframe of average worst return for each asset, columns are time_frames and index is a range index.</p></li>
<li><dl class="simple">
<dt>method: string with optimization method to be used. The supported optimization methods are:</dt><dd><ul>
<li><p>mixed_timeframes: selects the optimal currency pair from each available timeframe, then selects the optimal equally weighted combination of these time frames.</p></li>
<li><p>single_timeframe: selects the optimal time frame from the available timeframes, then selects the optimal equally weighted combination of currency pairs in the selected time frame.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>objective: string with optimization objective to be used. The supported optimization objectives are:</dt><dd><ul>
<li><p>min_win_rate   : minimizes the required win rate for the portfolio to acheive a positive returns.</p></li>
<li><p>min_risk_reward: minimizes the required risk reward ratio required for the portfolio to acheive a positive returns.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>test_run: boolean flag used for testing purposes. If true, the constructed portfolios will consist of only one asset.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>optimized_portfolio_idxs   : tuple with length equal to ‘optimized_n’ and values of integers that repesent the indices corresponding to the optimal currency pairs.</p></li>
<li><p>optimized_portfolio_tfs    : numpy array with length of ‘optimized_n’ and values of optimal timeframes.</p></li>
<li><p>optimized_portfolio_weights: numpy array with length equal to ‘optimized_n’ and values of equal floats that sum up to 1.</p></li>
<li><p>optimized_n                : integer indicating the number of assets in the constructed portfolio.</p></li>
<li><p>optimized_W_R              : float indicating the minimum required win rate for the portfolio to acheive positive return.</p></li>
<li><p>optimized_R_R              : float indicating the minimum required risk reward for the portfolio to acheive positive return.</p></li>
</ul>
</dd>
</dl>
<p>** this function is designed to be used internally in ‘fxmanager.optimization.eqw_optimization_test.run()’ function. However, it can be used by the user separately to construct a portfolio for a given day without running the optimization test.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.eq_weight_optimizer.single_timeframe_portfolio">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.eq_weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">single_timeframe_portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best_tf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrst_tf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.eq_weight_optimizer.single_timeframe_portfolio" title="Permalink to this definition"></a></dt>
<dd><p>Helper function for ‘fxmanager.optimization.eq_weight_optimizer.optimize()’ function.</p>
<p>selects the optimal equally weighted combination of currency pairs in the given timeframe data.</p>
</dd></dl>

</div>
<div class="section" id="module-fxmanager.optimization.eqw_optimization_test">
<span id="fxmanager-optimization-eqw-optimization-test-module"></span><h2>fxmanager.optimization.eqw_optimization_test module<a class="headerlink" href="#module-fxmanager.optimization.eqw_optimization_test" title="Permalink to this headline"></a></h2>
<p>This module contains a function that rans an equally weighted optimization test on historical data.</p>
<dl class="simple">
<dt>Functions:</dt><dd><ul class="simple">
<li><p>run_test(): Runs an optimization test on historical data given an ‘optimization_method’ and ‘optimization_objective’.</p></li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.eqw_optimization_test.run_test">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.eqw_optimization_test.</span></span><span class="sig-name descname"><span class="pre">run_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization_objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenarios_per_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_rewards</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_logs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.eqw_optimization_test.run_test" title="Permalink to this definition"></a></dt>
<dd><p>Runs an optimization test given an ‘optimization_method’ and ‘optimization_objective’.</p>
<p>The test uses preprocessed historical data to construct a portfolio using data from day (n) and then we use this portfolio to calculate average expected returns in day (n+1). The expected returns are calculated for every single element in ‘risk_rewards’ list and then averaged over ‘scenarios_per_day’ every day.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>data_dir              : string with the directory or full path to the directory in which application data is kept. If the setup() function is used to create the recommended project structure, the default None value should be used.</p></li>
<li><dl class="simple">
<dt>optimization_method<span class="classifier">string with optimization method to be used. The supported optimization methods are:</span></dt><dd><ul>
<li><p>mixed_timeframes : selects the optimal currency pair from each available timeframe, then selects the optimal equally weighted combination of these time frames.</p></li>
<li><p>single_timeframe : selects the optimal time frame from the available timeframes, then selects the optimal equally weighted combination of currency pairs in the selected time frame.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>optimization_objective: string with optimization objective to be used. The supported optimization objectives are:</dt><dd><ul>
<li><p>min_win_rate    : minimizes the required win rate for the portfolio to acheive a positive returns.</p></li>
<li><p>min_risk_reward : minimizes the required risk reward ratio required for the portfolio to acheive a positive returns.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>scenarios_per_day     : integer indicating the number of scenarios over which the expected return is averaged every day.</p></li>
<li><p>risk_rewards          : list of floats. the average expected return is calculated for each value in this list every day.</p></li>
<li><p>leverage              : float indicating the leverage. if no leverage is used set to 1.</p></li>
<li><p>test_run              : boolean flag used for testing purposes. If true, the constructed portfolios will consist of only one asset.</p></li>
<li><p>save_plots            : boolean flag. If True, the program will save result plots to ‘data_dirvisualizations’ directory.</p></li>
<li><p>save_logs             : boolean flag. If True, the program will save result plots to ‘data_dirlogsequally_weighted_optimizer_logs.txt’ file.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<p>Saved Results: test results are saved to ‘data_dirvisualizations’ for plots and ‘data_dirstats’ for csv files.</p>
<blockquote>
<div><ul class="simple">
<li><p>Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png : image with 2 sub-plots sharing the X-axis for the offsets, and Y axis for win probabilites and average expected returns.  
Offsets are linearly separated floats added to the ‘min_win_rate’ argument, starting from (0.01, 0.02, …), the value of ‘min_win_rate’ is incremented until the win probabilty becomes greater than or equal to 1.  
the plot might also contain several lines per plot, each line represents calculations a single risk-reward ratio.</p></li>
<li><p>Optimizer_Test_Required_Win_Rates.png: image with a plot of constructed portfolios win rates on the Y-axis vs days on the X-axis.</p></li>
<li><p>Optimizer_Test_Risk _Reward_Ratios.png: image with a plot of constructed portfolios risk rewards on the Y-axis vs days on the X-axis.</p></li>
<li><p>Optimizer_Test_portfolios.csv : csv file with the constructed portfolios for every day. the index starts from 1 because every row represents the portfolio created using data from the day before so day 0 does not count.</p></li>
<li><p>Optimizer_Test_win_probs.csv : csv file with the data frame used for plotting the first sub-plot in ‘Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png’</p></li>
<li><p>Optimizer_Test_expexted_returns.csv : csv file with the data frame used for plotting the second sub-plot in ‘Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png’</p></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-fxmanager.optimization.w_optimization_test">
<span id="fxmanager-optimization-w-optimization-test-module"></span><h2>fxmanager.optimization.w_optimization_test module<a class="headerlink" href="#module-fxmanager.optimization.w_optimization_test" title="Permalink to this headline"></a></h2>
<p>This module contains a function that rans a weighted optimization test on historical data.</p>
<dl class="simple">
<dt>Functions:</dt><dd><ul class="simple">
<li><p>run_test(): Runs an optimization test on historical data given an ‘optimization_method’ and ‘optimization_objective’.</p></li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.w_optimization_test.run_test">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.w_optimization_test.</span></span><span class="sig-name descname"><span class="pre">run_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization_objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenarios_per_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_rewards</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_logs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.w_optimization_test.run_test" title="Permalink to this definition"></a></dt>
<dd><p>Runs an optimization test given an ‘optimization_method’ and ‘optimization_objective’.</p>
<p>The test uses preprocessed historical data to construct a portfolio using data from day (n) and then we use this portfolio to calculate
average expected returns in day (n+1). The expected returns are calculated for every single element in ‘risk_rewards’ list and then
averaged over ‘scenarios_per_day’ every day.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>data_dir              : string with the directory or full path to the directory in which application data is kept. If the setup() function is used to create the recommended project structure, the default None value should be used.</p></li>
<li><dl class="simple">
<dt>optimization_method<span class="classifier">string with optimization method to be used. The supported optimization methods are:</span></dt><dd><ul>
<li><p>mixed_timeframes : selects the optimal currency pair from each available timeframe, then selects the optimal combination of these time frames and the optimal weight for each time frame.</p></li>
<li><p>single_timeframe : selects the optimal time frame from the available timeframes, then selects the optimal combination of currency pairs in the selected time frame and the optimal weight for each currency pair.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>optimization_objective: string with optimization objective to be used. The supported optimization objectives are:</dt><dd><ul>
<li><p>min_win_rate    : minimizes the required win rate for the portfolio to acheive a positive returns.</p></li>
<li><p>min_risk_reward : minimizes the required risk reward ratio required for the portfolio to acheive a positive returns.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>scenarios_per_day     : integer indicating the number of scenarios over which the expected return is averaged every day.</p></li>
<li><p>risk_rewards          : list of integers. the average expected return is calculated for every integer in this list every day.</p></li>
<li><p>leverage              : float indicating the leverage. if no leverage is used set to 1.</p></li>
<li><p>test_run              : boolean flag used for testing purposes. If true, the constructed portfolios will consist of only one asset.</p></li>
<li><p>save_plots            : boolean flag. If True, the program will save result plots to ‘data_dirvisualizations’ directory.</p></li>
<li><p>save_logs             : boolean flag. If True, the program will save result plots to ‘data_dirlogsequally_weighted_optimizer_logs.txt’ file.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<p>Saved Results: test results are saved to ‘data_dirvisualizations’ for plots and ‘data_dirstats’ for csv files.</p>
<blockquote>
<div><ul class="simple">
<li><p>Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png : image with 2 sub-plots sharing the X-axis for the offsets, and Y axis for win probabilites and average expected returns.  
Offsets are linearly separated floats added to the ‘min_win_rate’ argument, starting from (0.01, 0.02, …), the value of ‘min_win_rate’ is incremented until the win probabilty becomes greater than or equal to 1.  
The plot might also contain several lines per plot, each line represents calculations a single risk-reward ratio.</p></li>
<li><p>Optimizer_Test_Required_Win_Rates.png : image with a plot of constructed portfolios win rates on the Y-axis vs days on the X-axis.</p></li>
<li><p>Optimizer_Test_Risk _Reward_Ratios.png : image with a plot of constructed portfolios risk rewards on the Y-axis vs days on the X-axis.</p></li>
<li><p>Optimizer_Test_portfolios.csv : csv file with the constructed portfolios for every day. the index starts from 1 because every row represents the portfolio created using data from the day before and tested on the current day.</p></li>
<li><p>Optimizer_Test_win_probs.csv : csv file with the data frame used for plotting the first sub-plot in ‘Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png’</p></li>
<li><p>Optimizer_Test_expexted_returns.csv : csv file with the data frame used for plotting the second sub-plot in ‘Optimizer_Test_Win_Probs_&amp;_Expexted_Rets_vs_Offsets.png’</p></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-fxmanager.optimization.weight_optimizer">
<span id="fxmanager-optimization-weight-optimizer-module"></span><h2>fxmanager.optimization.weight_optimizer module<a class="headerlink" href="#module-fxmanager.optimization.weight_optimizer" title="Permalink to this headline"></a></h2>
<p>This module contains helper functions used internally in this module and other modules in fxmanager’s optimization sub-package.</p>
<p>the functions defined in this module are designed for constructing optimal weighted portfolios. a portfolio consists of one or more assets where an asset in this context refers to a currency pair being traded in a specefic time frame.  
for example, if the currency pair ‘EURUSD’ is being traded in two different time frames, 5 and 10 minutes, where a new position is opened every 5 or 10 minutes, in this case the ‘EURUSD_5min’ and ‘EURUSD_10min’ are two different assets.</p>
<dl class="simple">
<dt>Public Functions:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>optimize(): runs weighted portfolio optimization using data from a single day given an optimization method and objective.</dt><dd><p>** this function is designed to be used internally in ‘fxmanager.optimization.eqw_optimization_test.run()’ function. However, it can be used by the user separately to construct a portfolio for a given day without running the optimization test.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.weight_optimizer.mixed_timeframes_portfolio">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">mixed_timeframes_portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bestN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrstN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.weight_optimizer.mixed_timeframes_portfolio" title="Permalink to this definition"></a></dt>
<dd><p>Helper function for ‘fxmanager.optimization.weight_optimizer.optimize()’ function.</p>
<p>selects the optimal currency pair from each timeframe in the given data, then selects the optimal weighted combination of these timeframes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.weight_optimizer.optimize">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best_rets_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrst_rets_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mixed_timeframes'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.weight_optimizer.optimize" title="Permalink to this definition"></a></dt>
<dd><p>runs weighted portfolio optimization using data from a single day given an optimization method and objective.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><p>best_rets_df: pandas dataframe of average best return for each asset, columns are time_frames and index is a range index.</p></li>
<li><p>wrst_rets_df: pandas dataframe of average worst return for each asset, columns are time_frames and index is a range index.</p></li>
<li><dl class="simple">
<dt>data_dir<span class="classifier">string with the directory name or full path to the directory in which application data is kept. If the setup()</span></dt><dd><p>function is used to create the recommended project structure, the default None value should be used.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>method: string with optimization method to be used. The supported optimization methods are:</dt><dd><ul>
<li><dl class="simple">
<dt>mixed_timeframes: selects the optimal currency pair from each available timeframe, then selects the optimal equally weighted</dt><dd><p>combination of these time frames.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>single_timeframe: selects the optimal time frame from the available timeframes, then selects the optimal equally weighted</dt><dd><p>combination of currency pairs in the selected time frame.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>objective: string with optimization objective to be used. The supported optimization objectives are:</dt><dd><ul>
<li><p>min_win_rate   : minimizes the required win rate for the portfolio to acheive a positive returns.</p></li>
<li><p>min_risk_reward: minimizes the required risk reward ratio required for the portfolio to acheive a positive returns.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>test_run: boolean flag used for testing purposes. If true, the constructed portfolios will consist of only one asset.</p></li>
</ul>
</dd>
<dt>Returns:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>optimized_portfolio_idxs<span class="classifier">tuple with length equal to ‘optimized_n’ and values of integers that repesent the indices corresponding</span></dt><dd><p>to the optimal currency pairs.</p>
</dd>
</dl>
</li>
<li><p>optimized_portfolio_tfs    : numpy array with length of ‘optimized_n’ and values of optimal timeframes.</p></li>
<li><p>optimized_portfolio_weights: numpy array with length equal to ‘optimized_n’ and values of equal floats that sum up to 1.</p></li>
<li><p>optimized_n                : integer indicating the number of assets in the constructed portfolio.</p></li>
<li><p>optimized_W_R              : float indicating the minimum required win rate for the portfolio to acheive positive return.</p></li>
<li><p>optimized_R_R              : float indicating the minimum required risk reward for the portfolio to acheive positive return.</p></li>
</ul>
</dd>
<dt>** this function is designed to be used internally in ‘fxmanager.optimization.eqw_optimization_test.run()’ function. However,</dt><dd><p>it can be used by the user separately to construct a portfolio for a given day without running the optimization test.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fxmanager.optimization.weight_optimizer.single_timeframe_portfolio">
<span class="sig-prename descclassname"><span class="pre">fxmanager.optimization.weight_optimizer.</span></span><span class="sig-name descname"><span class="pre">single_timeframe_portfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">best_tf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrst_tf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_assets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min_win_rate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fxmanager.optimization.weight_optimizer.single_timeframe_portfolio" title="Permalink to this definition"></a></dt>
<dd><p>Helper function for ‘fxmanager.optimization.eq_weight_optimizer.optimize()’ function.</p>
<p>selects the optimal weighted combination of currency pairs in the given timeframe data.</p>
</dd></dl>

</div>
<div class="section" id="module-fxmanager.optimization">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-fxmanager.optimization" title="Permalink to this headline"></a></h2>
<p>This sub-package contains the mudules used for portfolio construction and optimization.</p>
<dl class="simple">
<dt>Modules:</dt><dd><ul class="simple">
<li><p>eq_weight_optimizer   : This module contains helper functions used internally in this module and other  modules in fxmanager’s optimization sub-package.</p></li>
<li><p>eqw_optimization_test : This module contains a function that rans an equally weighted optimization test on historical data.</p></li>
<li><p>weight_optimizer      : This module contains a function that rans a weighted optimization test on historical data.</p></li>
<li><p>w_optimization_test   : This module contains helper functions used internally in this module and other modules in fxmanager’s optimization sub-package.</p></li>
</ul>
</dd>
</dl>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fxmanager.dwx.html" class="btn btn-neutral float-left" title="fxmanager.dwx package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fxmanager.simulation.html" class="btn btn-neutral float-right" title="fxmanager.simulation package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright © 2021 Abdullah Bahi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>